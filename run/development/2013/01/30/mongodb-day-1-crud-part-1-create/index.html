
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="author" content="Heather Campbell" />
    <meta name="description" content="Creating items in MongoDB">

    <title>MongoDB Day 1 (CRUD Part 1: Create)</title>

    <link rel="stylesheet" href="/assets/themes/dinky/css/styles.css">
    <link rel="stylesheet" href="/assets/themes/dinky/css/pygment_trac.css">
    <script src="/assets/themes/dinky/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header"><a href="/">Technical Musings of a Mummy</a></h1>
        <ul>
          
          
          


  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages/about/index.html">Me</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  



        </ul>
        
        
        <div class="misc vcard">
          <h5 class="connect">Connect with Me</h5>
            

            <a href="mailto:heatherjcampbell@hotmail.co.uk"><img src="/assets/themes/dinky/images/email.png" alt="email"/></a>
            
            
            <a href="http://github.com/heatherjc07/" rel="me"><img src="/assets/themes/dinky/images/github.png" alt="github"/></a>
            
            
            <a href="http://twitter.com/HCampbell07/" rel="me"><img src="/assets/themes/dinky/images/twitter.png" alt="twitter"/></a>
            
            
            
            
            
        </div><!-- misc -->
        
      </header>

      <section>
      
<section>
  <h1>MongoDB Day 1 (CRUD Part 1: Create)</h1>

  <p><em>My experience of Day 1 with <a href='http://www.mongodb.org'>MongoDB</a> in <a href='http://pragprog.com/book/rwdata/seven-databases-in-seven-weeks'>Seven Databases In Seven Weeks</a>.</em></p>

<p>In my previous post I talked about some of the features of MongoDB. In this post I want to look at creating a database with collections and documents. I&#8217;m going to take the very unoriginal approach of creating a database to store blog articles. The 10gen dev course takes you through building a blog using MongoDB and Python and <a href='http://pragprog.com/book/rwdata/seven-databases-in-seven-weeks'>Seven Databases In Seven Weeks</a> has this as a homework exercise.</p>

<p>The first thing we need to do is start MongoDB by opening up a command prompt and using the <code>mongod</code> command in the bin directory of our install. Once the server has started up we can interact with it via the command line interface which comes with MongoDB. In a second command prompt go to the bin directory of the install and type <code>mongo</code>. This will take you into the MongoDB Command Line. By default if you don&#8217;t specify a database it use the <em>test</em> database. We&#8217;re going to use a database called <em>blogger</em>. As we&#8217;re already in the Command line I&#8217;ll create and switch to the blogger database by typing the command use blogger.</p>

<p><img alt='create db' src='/assets/themes//dinky/images/mongo-crud-create/create_db.JPG' /></p>

<p>Another option would have been to use <code>mongo blogger</code> to start up the command line. In both instances MongoDB creates the database if it doesn&#8217;t already exist, otherwise it just sets it to the database in use so any further commands we run will run against it. Now lets create our first document.We create a document using the insert command.</p>

<p><img alt='insert document' src='/assets/themes//dinky/images/mongo-crud-create/insert_doc.JPG' /></p>

<p>In the command above I&#8217;m adding the document to a collection called <code>articles</code>. MongoDB will create this collection if it does not already exist. My document is made up of lots of name value pairs. My tag field is an array of strings and my comments field is an array of nested documents which represent the comments people have made about the article. To verify the articles collection exists run the following command.</p>

<p><img alt='view collections' src='/assets/themes//dinky/images/mongo-crud-create/view_collections.JPG' /></p>

<p>Our articles collection and the system collection system.indexes are returned. As there is only one document currently in the articles collection I can retrieve it using the find command without specifying any criteria. I&#8217;ve used the pretty command to make the result easier to read.</p>

<p><img alt='find docs' src='/assets/themes//dinky/images/mongo-crud-create/find_docs.JPG' /></p>

<p>I want to create multiple documents with the same structure so to reduce the amount of code I need to write I&#8217;m going to create a JavaScript function to create my blog entries. The Mongo shell is a JavaScript Shell so I can just type my function in and start using it. Here is the function.</p>

<p><img alt='insert function' src='/assets/themes//dinky/images/mongo-crud-create/insert_function.JPG' /></p>

<p>And here is an example of using it.</p>

<p><img alt='use function' src='/assets/themes//dinky/images/mongo-crud-create/use_function.JPG' /></p>

<p>I can prove the document has added correctly using the find command with the condition title is Fun with Haskell.</p>

<p><img alt='find doc' src='/assets/themes//dinky/images/mongo-crud-create/find_doc.JPG' /></p>

<p>That&#8217;s the basics of creating a database, collection and documents covered. In my next post I&#8217;ll look at searching for documents.</p>

  


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'technicalmusingsofamummy'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




</section>


      </section>

      <footer>
      <p><small>Hosted on <a href="http://pages.github.com/">GitHub Pages</a> using the <a href="https://github.com/sodabrew/theme-dinky">Dinky theme</a> for <a href="http://jekyllbootstrap.com/">Jekyll Bootstrap</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
  </body>
</html>

